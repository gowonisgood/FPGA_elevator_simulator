# FPGA Elevator Simulator

## 구현 결과

### 📥 숫자 입력받기
- 사용자가 **가고 싶은 층 수를 4개까지 입력**합니다.
- 입력된 층 수는 **7-segment array에 4자리로 표시**됩니다. (`array`의 마지막 4자리)

### 🔒 닫힘 버튼 누르기
- `# 버튼`(닫힘 버튼)을 누르면 **목표 층으로의 이동이 시작**됩니다.

### 🏢 현재 층 표시
- 현재 엘리베이터가 위치한 층은 **7-segment (단독)**에 표시됩니다.

### 🔼🔽 현재 상황 표시
- 엘리베이터가 **올라가는지(Up)** 또는 **내려가는지(Down)**를 **Text LCD에 출력**합니다.

### 🔊 버튼 누를 시 소리
- 각 층수를 입력할 때마다 **피에조에서 소리 발생**
- 1층~9층 입력 시, 각각 **도~시**까지 **한 음씩 높은 소리**가 출력됩니다.

---

## 2. 구현 방법

### 전체적인 구조도
> 전체 시스템은 입력 → 처리 → 출력의 순으로 구성되며, 각 모듈은 trigger와 clock 타이밍을 중심으로 동기화됩니다.

---

## 2-1. 구현 세부사항

### 7-segment Array (목표층 표시)
- 입력을 받으면 **decimal to binary**로 변환 후 **4bit 인코딩**.
- 인코딩된 값은 **4개의 레지스터**에 저장.
- **trigger 신호**가 감지될 때만 레지스터 저장.
- 이후 **4bit counter**와 **MUX**를 통해 주기적으로 값을 읽고, **7-segment array에 출력**.

### 7-segment (단독, 현재층 표시)
- `# 버튼`을 눌렀을 때만 **counter가 증가**.
- MUX를 통해 **다음 레지스터 값**이 선택되어 출력됨.
- 예: 2→3→5→7 입력 후, `#` 버튼을 누르면 2 출력 → 다시 `#` 누르면 3 출력 …

### Text LCD (상승/하강 표시)
- **현재 층과 목표 층을 비교**하여 **상승(UP)** 또는 **하강(DOWN)** 상태를 표시.
- `# 버튼`을 누를 때마다 **레지스터의 값이 shift**, 이전값과 비교하여 방향 결정.
- Verilog 기반 모듈 사용.

### Piezo (소리 출력)
- 입력된 층에 따라 **분주값을 계산**, 도레미파솔라시 음계에 해당하는 소리 출력.

---

## 2-2. 모듈 설명

### 4-bit Compare with Enable
- **Enable 신호가 추가된 4bit counter**.
- trigger가 1일 때만 카운터 증가.

### Compare (비교기)
- 현재 층과 목표 층을 비교하여 **UP / DOWN 결정**.

### Text LCD (Verilog)
- 비교 결과에 따라 **UP / DOWN 출력**.

### 재사용한 모듈
- `decimal_to_binary`, `trigger`, `CLK_DIV`, `register`, `binary_to_segment` 등은 수업 시간에 배운 모듈을 그대로 사용.

---

## 2-3. 전체 회로
> 입력 → 디코딩 → 레지스터 저장 → trigger → MUX 선택 → 7-segment 및 Text LCD 출력

---

## 3. 구현 변경된 내용

- **Piezo 기능**은 원래 계획에 없었지만, **피드백 효과**를 위해 추가됨.
  - 버튼 클릭 시 **직관적인 피드백**을 제공하고, **어두운 환경에서도 인식 용이**.
  
- **자동 층 이동 상태 출력 기능**은 제거.
  - **clock 타이밍 제어 복잡성** 때문에 trigger 방식으로 전환.
  - trigger 모듈을 활용하여, `# 버튼`을 누를 때만 **현재 층과 상태 출력**.

---

## ✅ 기존 계획 대비 완성도

- 일부 기능 변경은 있었지만, **주요 목표 기능은 충실히 구현**됨.
- 목표 층수를 7-segment array에 직관적으로 표시하고, `# 버튼`을 누를 때마다 현재 층수와 이동 방향(상승/하강)을 출력하는 시스템 완성.
- **Piezo 모듈을 통한 확장성**으로 사용성 및 인터페이스 강화.
- 수업 시간에 배운 모듈들을 실제로 응용하면서 **학습적 가치와 실용성을 모두 확보**.
- 이번 프로젝트는 단순 기능 구현을 넘어 **창의적이고 현실적인 문제 해결 경험**을 제공한 유의미한 작업이었음.
